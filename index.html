<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ishaq TV Ultra VIP</title>

<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
body{
margin:0;
font-family:'Vazirmatn',sans-serif;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:#fff;
text-align:center;
}

header{
padding:25px;
font-size:30px;
font-weight:bold;
background:rgba(0,0,0,0.4);
backdrop-filter:blur(15px);
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
gap:20px;
padding:30px;
max-width:1300px;
margin:auto;
}

.card{
padding:25px;
border-radius:25px;
background:rgba(255,255,255,0.1);
backdrop-filter:blur(20px);
cursor:pointer;
transition:0.3s;
font-size:18px;
font-weight:bold;
}

.card:hover{
transform:scale(1.07);
background:rgba(255,255,255,0.25);
}

#playerPage{
display:none;
padding:20px;
}

video{
width:95%;
max-width:1100px;
border-radius:25px;
box-shadow:0 0 50px rgba(0,0,0,0.7);
}

.controls{
margin-top:15px;
}

button{
padding:10px 20px;
margin:5px;
border:none;
border-radius:30px;
cursor:pointer;
font-weight:bold;
background:#00c6ff;
color:#000;
transition:0.3s;
}

button:hover{
background:#0072ff;
color:#fff;
}
</style>
</head>
<body>

<header>ðŸ”¥ Ishaq TV ULTRA VIP ðŸ”¥</header>

<div id="homePage">
<div class="grid">

<div class="card" onclick="openChannel('tolo','Ø·Ù„ÙˆØ¹')">Ø·Ù„ÙˆØ¹</div>
<div class="card" onclick="openChannel('varzesh','ÙˆØ±Ø²Ø´')">ÙˆØ±Ø²Ø´</div>
<div class="card" onclick="openChannel('irib3','Ø´Ø¨Ú©Ù‡ Ø³Ù‡')">Ø´Ø¨Ú©Ù‡ Ø³Ù‡</div>
<div class="card" onclick="openChannel('persiana','Ù¾Ø±Ø´ÛŒØ§ Ø§Ø³Ù¾ÙˆØ±Øª')">Ù¾Ø±Ø´ÛŒØ§ Ø§Ø³Ù¾ÙˆØ±Øª</div>
<div class="card" onclick="openChannel('solh','ØµÙ„Ø­ Ø§Ø³Ù¾ÙˆØ±Øª')">ØµÙ„Ø­ Ø§Ø³Ù¾ÙˆØ±Øª</div>
<div class="card" onclick="openChannel('ariana','Ø¢Ø±ÛŒØ§Ù†Ø§')">Ø¢Ø±ÛŒØ§Ù†Ø§</div>
<div class="card" onclick="openChannel('arezo','Ø¢Ø±Ø²Ùˆ')">Ø¢Ø±Ø²Ùˆ</div>
<div class="card" onclick="openChannel('meraj','Ù…Ø¹Ø±Ø§Ø¬')">Ù…Ø¹Ø±Ø§Ø¬</div>
<div class="card" onclick="openChannel('persiana2','Ù¾Ø±Ø´ÛŒØ§ Ø§Ø³Ù¾ÙˆØ±Øª 2')">Ù¾Ø±Ø´ÛŒØ§ Ø§Ø³Ù¾ÙˆØ±Øª 2</div>
<div class="card" onclick="openChannel('gem','Ø´Ø¨Ú©Ù‡ Ø¬ÛŒÙ…')">Ø´Ø¨Ú©Ù‡ Ø¬ÛŒÙ…</div>

</div>
</div>

<div id="playerPage">
<h2 id="channelTitle"></h2>
<video id="video" controls autoplay></video>

<div class="controls">
<button onclick="switchSource('s1')">Source 1</button>
<button onclick="switchSource('s2')">Source 2</button>
<button onclick="goBack()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
</div>

<script>

let currentChannel="";
let currentSource="s1";
let hls;

function openChannel(channel,name){
currentChannel=channel;
currentSource="s1";
document.getElementById("channelTitle").innerText=name;
document.getElementById("homePage").style.display="none";
document.getElementById("playerPage").style.display="block";
loadStream();
}

function loadStream(){
const video=document.getElementById("video");
const url=`https://ishaq-proxy.eshaqtv1.workers.dev/${currentChannel}/${currentSource}/chunklist0.m3u8`;

if(hls){ hls.destroy(); }

if(Hls.isSupported()){
hls=new Hls();
hls.loadSource(url);
hls.attachMedia(video);

hls.on(Hls.Events.ERROR,function(event,data){
if(data.fatal && currentSource==="s1"){
currentSource="s2";
loadStream();
}
});

}else if(video.canPlayType('application/vnd.apple.mpegurl')){
video.src=url;
}
}

function switchSource(source){
currentSource=source;
loadStream();
}

function goBack(){
if(hls){ hls.destroy(); }
document.getElementById("playerPage").style.display="none";
document.getElementById("homePage").style.display="block";
}

</script>

</body>
</html>
